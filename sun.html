<!DOCTYPE html>
<html>
<head>
  <title>SUN</title>
</head>
<body>
  <canvas id="canvas"></canvas>
  <style type="text/css">
    html, body {
      margin: 0;
      overflow: hidden;
    }
  </style>
</body>
<script type="text/javascript">
"use strict";
const w = window.innerWidth;
const h = window.innerHeight;
const r = Math.min(w, h);

function rand(x) {
  const y = Math.sin(x * 100000.0);
  return y - Math.floor(y);
}

function mix(x, y, a) {
  return x * (1 - a) + y * a;
}

function smoothstep(edge0, edge1, x) {
  let t = (x - edge0) / (edge1 - edge0);
  t = Math.min(1, Math.max(0, t));
  return t * t * (3 - 2 * t);
}

function noise(t) {
  const i = Math.floor(t);
  const f = t - i;
  return mix(rand(i), rand(i + 1), smoothstep(0, 1, f));
}

function noiseColor(time, seed, frequency) {
  const fr = frequency * 1.2 * (rand(seed + 23) * 2 - 1);
  const fg = frequency * 1.2 * (rand(seed + 17) * 2 - 1);
  const fb = frequency * 1.2 * (rand(seed + 41) * 2 - 1);
  const red = noise(time * fr + 200 * rand(seed + 31));
  const green = noise(time * fg + 200 * rand(seed + 55));
  const blue = noise(time * fb + 200 * rand(seed + 101));
  return `rgb(${red * 255}, ${green * 255}, ${blue * 255})`;
}

const canvas = document.getElementById("canvas");
canvas.width = w;
canvas.height = h;
const ctx = canvas.getContext("2d");

const minimumAlpha = 0.5;
const maxSuns = 100;
const seed = Math.random() * 1000;
function draw() {
  const t = performance.now() / 1000 + seed;
  // background color
  const br = (noise(t / 3.93 + 401)) * 255;
  const bg = (noise(t / 3.97 + 100)) * 255;
  const bb = (noise(t / 4.17 + 95)) * 255;
  ctx.fillStyle = `rgb(${br}, ${bg}, ${bb})`;
  ctx.fillStyle = noiseColor(t, seed + 3124, 1/10);
  ctx.fillRect(0, 0, w, h);

  const numSuns = maxSuns * Math.abs(Math.sin(t / 10) ** 3) + 1;
  for (let i = numSuns - 1; i >= 0; i--) {
    const j = i / numSuns;
    const xRadius = 3 * r/8 * (noise(t / 3.31 + 430 + j)) + r/8;
    const yRadius = 3 * r/8 * (noise(t / 3.51 + 732 + j)) + r/8;
    const rotation = Math.PI * 2 * (noise(t / 2.51 + 532 + j))
    // ellipse color
    const er = (noise(t / 2.11 + 200 + j)) * 255;
    const eg = (noise(t / 2.15 + 157 + j)) * 255;
    const eb = (noise(t / 2.99 + 97 + j)) * 255;
    const alpha = ((1 - minimumAlpha) * noise(t / 5.51 + 732 + j)
      + minimumAlpha) / numSuns;

    ctx.beginPath();
    ctx.ellipse(w/2, h/2, xRadius, yRadius, rotation, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(${er}, ${eg}, ${eg}, ${alpha})`;
    ctx.fill();
  }
  requestAnimationFrame(draw);
}
draw();
</script>
</html>